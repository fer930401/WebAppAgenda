
if(typeof DayPilot==='undefined'){var DayPilot={};};if(typeof DayPilotMenu==='undefined'){var DayPilotMenu=DayPilot.MenuVisible={};};(function(){if(typeof DayPilot.Menu!=='undefined'){return;};var DayPilotMenu={};DayPilotMenu.mouse=null;DayPilotMenu.menu=null;DayPilotMenu.clickRegistered=false;DayPilotMenu.Menu=function($a){this.zIndex=10;this.useShadow=true;this.cssClassPrefix=null;this.items=$a;this.show=function(e){var $b=(typeof e.value==='function')?e.value():null;if(typeof(DayPilot.Bubble)!=='undefined'){DayPilot.Bubble.hideActive();};DayPilotMenu.menuClean();if(DayPilotMenu.mouse==null)return;var $c=document.createElement("div");$c.style.position="absolute";$c.style.top="0px";$c.style.left="0px";$c.style.display='none';$c.style.overflow='hidden';$c.style.zIndex=this.zIndex+1;$c.className=this.applyCssClass('main');$c.onclick=function(){this.parentNode.removeChild(this);};if(this.items===null||this.items.length===0){throw "No menu items defined.";};if(this.showMenuTitle){var title=document.createElement("div");title.innerHTML=this.menuTitle;title.className=this.applyCssClass("title");$c.appendChild(title);};for(var i=0;i<this.items.length;i++){var mi=this.items[i];var $d=document.createElement("div");if(typeof mi=='undefined'){continue;};if(mi.text=='-'){var $e=document.createElement("div");$d.appendChild($e);}else{var $f=document.createElement("a");$f.style.display="block";if(mi.href){$f.href=mi.href.replace(/\x7B0\x7D/gim,$b);}else if(mi.onclick){$f.item=mi;$f.onclick=mi.onclick;}else if(mi.command){var $g=function(mi,$f){return function(){var $h=$f.source;var $d=mi;$d.action=$d.action?$d.action:'CallBack';var $i=$h.calendar||$h.root;switch($h.type){case 'resource':$i.resourceHeaderMenuClick($d.command,$h,$d.action);return;case 'selection':$i.timeRangeMenuClick($d.command,$h,$d.action);return;default:$i.eventMenuClick($d.command,$h,$d.action);return;}};};$f.onclick=$g(mi,$f);};$f.source=e;var $j=document.createElement("span");$j.innerHTML=mi.text;$f.appendChild($j);$d.appendChild($f);};$c.appendChild($d);};$c.onclick=function(e){window.setTimeout(function(){DayPilotMenu.menuClean();},100);};$c.onmousedown=function(e){if(!e)var e=window.event;e.cancelBubble=true;if(e.stopPropagation)e.stopPropagation();};$c.oncontextmenu=function(){return false;};document.body.appendChild($c);$c.style.display='';var $k=$c.clientHeight;var $l=$c.offsetWidth;$c.style.display='none';var $m=document.documentElement.clientHeight;if(DayPilotMenu.mouse.clientY>$m-$k&&$m!=0){var $n=DayPilotMenu.mouse.clientY-($m-$k)+5;$c.style.top=(DayPilotMenu.mouse.y-$n)+'px';}else{$c.style.top=DayPilotMenu.mouse.y+'px';};var $o=document.documentElement.clientWidth;if(DayPilotMenu.mouse.clientX>$o-$l&&$o!=0){var $p=DayPilotMenu.mouse.clientX-($o-$l)+5;$c.style.left=(DayPilotMenu.mouse.x-$p)+'px';}else{$c.style.left=DayPilotMenu.mouse.x+'px';};$c.style.display='';this.addShadow($c);this.div=$c;DayPilot.Menu.active=this;return;};this.applyCssClass=function($q){if(this.cssClassPrefix){return this.cssClassPrefix+$q;}else{return "";}};this.addShadow=function($r){if(!this.useShadow){return;};if(!$r){return;};if(this.shadows&&this.shadows.length>0){this.removeShadow();};this.shadows=[];for(var i=0;i<5;i++){var $s=document.createElement('div');$s.style.position='absolute';$s.style.width=$r.offsetWidth+'px';$s.style.height=$r.offsetHeight+'px';$s.style.top=$r.offsetTop+i+'px';$s.style.left=$r.offsetLeft+i+'px';$s.style.zIndex=this.zIndex;$s.style.filter='alpha(opacity:10)';$s.style.opacity=0.1;$s.style.backgroundColor='#000000';document.body.appendChild($s);this.shadows.push($s);}};this.removeShadow=function(){if(!this.shadows){return;};for(var i=0;i<this.shadows.length;i++){document.body.removeChild(this.shadows[i]);};this.shadows=[];};DayPilot.re(document.body,'mousemove',DayPilotMenu.mouseMove);if(!DayPilotMenu.clickRegistered){DayPilot.re(document,'mousedown',DayPilotMenu.menuClean);DayPilotMenu.clickRegistered=true;}};DayPilotMenu.click=function($c,$t,$u){var $v=$c.parentNode;if(!$v){return false;};var $r=$v.object;if(!$r){return false;};var $i=$r.calendar||$r.root;switch($r.type){case 'resource':$i.resourceHeaderMenuClick($t,$r,$u);break;case 'selection':$i.timeRangeMenuClick($t,$r,$u);break;default:$i.eventMenuClick($t,$r,$u);break;};return false;};DayPilotMenu.menuClean=function(ev){if(typeof(DayPilot.Menu.active)=='undefined')return;if(DayPilot.Menu.active){DayPilot.Menu.active.removeShadow();document.body.removeChild(DayPilot.Menu.active.div);DayPilot.Menu.active=null;}};DayPilotMenu.mouseMove=function(ev){if(typeof(DayPilotMenu)==='undefined')return;DayPilotMenu.mouse=DayPilotMenu.mousePosition(ev);};DayPilotMenu.mousePosition=function(e){var $w=0;var $x=0;if(!e)var e=window.event;if(e.pageX||e.pageY){$w=e.pageX;$x=e.pageY;}else if(e.clientX||e.clientY){$w=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;$x=e.clientY+document.body.scrollTop+document.documentElement.scrollTop;};var $y={};$y.x=$w;$y.y=$x;$y.clientY=e.clientY;$y.clientX=e.clientX;return $y;};DayPilot.MenuVisible.Menu=DayPilotMenu.Menu;DayPilot.Menu=DayPilotMenu.Menu;})();


